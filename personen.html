<!doctype html>
<html lang="nl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Woordenlijst</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=Cormorant+Garamond:wght@400;500;600&display=swap"
    rel="stylesheet" />
  <!-- CDN Libraries -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css" />
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

  <script>
    (function () {
      const v = Date.now();
      document.write(`<link rel="stylesheet" href="style.css?v=${v}">`);
      document.write(`<link rel="stylesheet" href="woordfilter.css?v=${v}">`);
      document.write(`<script src="Woordenlijst.js?v=${v}"><\/script>`);
      document.write(`<script src="woordfilter.js?v=${v}"><\/script>`);
      document.write(`<script src="tooltip.js?v=${v}"><\/script>`);
      document.write(`<script src="toponiemen-icons.js?v=${v}"><\/script>`);
    })();
  </script>
</head>

<body>
  <header class="screen-only">
    <a href="index.html"> HOME </a>
  </header>
  <h1>Personen</h1>

  <!-- Table -->
  <table id="csvTable" class="display" style="width: 100%"></table>

  <script>
    $(document).ready(function () {
      initWoordenlijst("personen.csv", {
        onComplete: function () {
          const dt = $('#csvTable').DataTable ? $('#csvTable').DataTable() : null;
          if (dt) {
            // zet kolom 4 & 5 zichtbaar (0-based indices 3 en 4) als ze bestaan
            const colCount = dt.columns().count();
            if (colCount > 3) dt.column(3).visible(true);
            if (colCount > 4) dt.column(4).visible(true);
            dt.columns.adjust();

            // nu iconen toevoegen (functie uit topoiemen-icons.js)
            if (window.attachToponiemenIcons) attachToponiemenIcons("#csvTable", 3, 4);
          } else {
            console.warn("DataTable niet gevonden bij onComplete");
          }

          // bestaande filter init
          initWoordenfilter("csvTable", "woordfilterContainer", {
            col4Index: 3,
            col5Index: 4,
            col4Label: "Woordsoort",
            col5Label: "Extra"
          });
        }
      });
    });
  </script>
</body>

</html>